#!/bin/bash
# Example script for designing sequences for all ensembles
# generated by examples/scripts/generate_ensembles.sh,
# with position-wise constraints specified in examples/example_data/pos_constraint_csvs/native_pdb_constraints.csv.

CONFORMER_DIR=examples/outputs/generate_ensembles/cc95-epoch3490-sampling_partial_diffusion-ss1.0-schurn0-ccstart0.0-dx0.0-dy0.0-dz0.0-rewind150

source env_setup.sh
python3 caliby/eval/sampling/seq_des_multi_ensemble.py \
    ckpt_path=model_params/caliby/caliby.ckpt \
    input_cfg.conformer_dir=${CONFORMER_DIR} \
    pos_constraint_csv=examples/example_data/pos_constraint_csvs/native_pdb_constraints.csv \
    sampling_cfg_overrides.num_seqs_per_pdb=4 \
    out_dir=examples/outputs/seq_des_multi_ensemble_constraints
